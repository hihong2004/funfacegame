<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Fun Face Game - The most hilarious AI face game platform!">
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#FFD93D">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Fun Face Game - Make Every Face Fun!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{font-family:'Fredoka One','Noto Sans TC',cursive,sans-serif;background:#fffdf2;color:#4a4a4a;min-height:100vh;margin:0;padding:0;overflow-x:hidden}
    .clay-card{border:6px solid #4a4a4a;border-radius:40px;box-shadow:0 14px 0 #4a4a4a,inset 0 -10px 0 rgba(0,0,0,.05);transition:all .3s cubic-bezier(.175,.885,.32,1.275);background:#fff;position:relative;overflow:hidden}
    .clay-card:active{transform:translateY(10px);box-shadow:0 4px 0 #4a4a4a,inset 0 -10px 0 rgba(0,0,0,.05)}
    .clay-button{border:4px solid #4a4a4a;border-radius:22px;box-shadow:0 6px 0 #4a4a4a;transition:all .15s ease;background:#fff;cursor:pointer;font-family:inherit}
    .clay-button:hover{transform:translateY(-2px);box-shadow:0 8px 0 #4a4a4a}
    .clay-button:active{transform:translateY(4px);box-shadow:0 2px 0 #4a4a4a}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
    @keyframes wobble{0%{transform:scale(1)}25%{transform:scale(1.1) rotate(2deg)}50%{transform:scale(1) rotate(-2deg)}75%{transform:scale(1.05) rotate(1deg)}100%{transform:scale(1)}}
    @keyframes rotate-in{0%{opacity:0;transform:rotate(-10deg) scale(.8)}100%{opacity:1;transform:rotate(0) scale(1)}}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .animate-float{animation:float 4s ease-in-out infinite}
    .hover-wobble:hover{animation:wobble .6s ease-in-out forwards}
    .animate-rotate-in{animation:rotate-in .5s cubic-bezier(.175,.885,.32,1.275) forwards}
    .lang-switcher{position:relative}
    .lang-dropdown{display:none;position:absolute;right:0;top:calc(100% + 8px);min-width:150px;z-index:100;padding:8px 0}
    .lang-switcher.open .lang-dropdown{display:block;animation:rotate-in .3s ease forwards}
    .lang-option{display:block;width:100%;text-align:left;padding:10px 16px;font-size:14px;font-weight:700;color:#4a4a4a;background:0 0;border:none;cursor:pointer;transition:background .2s}
    .lang-option:hover{background:#FEF3C7}
    .lang-option.active{color:#3B82F6;background:#EFF6FF}
    .game-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem}
    @media(min-width:768px){.game-grid{gap:2.5rem}}
    @media(min-width:1024px){.game-grid{grid-template-columns:repeat(3,1fr)}}
    .game-card{aspect-ratio:1;padding:8px;text-decoration:none}
    .game-card img{width:100%;height:100%;object-fit:contain;padding:4px;transition:transform .5s ease-out}
    @media(min-width:768px){.game-card img{padding:12px}}
    .game-card:hover img{transform:scale(1.1)}
    .game-card.disabled{opacity:.8;cursor:default}
    .game-card.disabled:active{transform:none;box-shadow:0 14px 0 #4a4a4a,inset 0 -10px 0 rgba(0,0,0,.05)}
    .game-card.disabled:hover img{transform:none}
    .coming-soon-badge{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;transform:rotate(-10deg);pointer-events:none;z-index:30}
    .coming-soon-badge span{background:#ff4d4d;color:#fff;padding:6px 12px;border-radius:16px;font-size:14px;font-weight:700;border:4px solid #fff;box-shadow:0 4px 15px rgba(0,0,0,.3);animation:pulse 2s ease-in-out infinite}
    @media(min-width:768px){.coming-soon-badge span{padding:8px 20px;font-size:18px}}
    .logo-container{width:96px;height:96px}
    @media(min-width:768px){.logo-container{width:128px;height:128px}}
    .logo-fallback{width:100%;height:100%;background:linear-gradient(135deg,#FFD93D 0%,#FFB800 100%);border-radius:35%;border:6px solid #4a4a4a;display:flex;align-items:center;justify-content:center;font-size:48px;box-shadow:0 12px 0 #4a4a4a;position:relative;overflow:hidden}
    @media(min-width:768px){.logo-fallback{font-size:64px}}
    .logo-fallback::before{content:'';position:absolute;top:-20%;left:-20%;width:60%;height:60%;background:#fff;opacity:.3;filter:blur(20px);border-radius:50%}
    .ad-placeholder{width:100%;height:150px;background:0 0;border:4px dashed #d1d5db;border-radius:24px;display:flex;align-items:center;justify-content:center;color:#9ca3af;font-weight:700}
    @media(min-width:768px){.ad-placeholder{height:250px}}
    .footer-link{font-weight:700;text-decoration:underline;text-underline-offset:4px;text-decoration-thickness:4px;transition:color .2s;background:0 0;border:none;cursor:pointer;font-family:inherit;font-size:inherit;color:inherit}
    .footer-link:hover{color:#3B82F6}
    .footer-link.about{text-decoration-color:#BFDBFE}
    .footer-link.privacy{text-decoration-color:#A7F3D0}
    .footer-link.contact{text-decoration-color:#DDD6FE}
    .modal-overlay{position:fixed;inset:0;z-index:60;display:none;align-items:center;justify-content:center;padding:16px;background:rgba(0,0,0,.4);backdrop-filter:blur(4px)}
    .modal-overlay.show{display:flex}
    .modal-content{width:100%;max-width:500px;max-height:85vh;overflow-y:auto;padding:24px;animation:rotate-in .3s ease forwards}
    @media(min-width:768px){.modal-content{padding:32px}}
    .modal-close{position:absolute;right:16px;top:16px;font-size:28px;font-weight:700;color:#9ca3af;background:0 0;border:none;cursor:pointer;transition:transform .2s,color .2s;line-height:1}
    .modal-close:hover{transform:scale(1.2);color:#4a4a4a}
    .install-btn{display:none}
    .install-btn.show{display:flex}
    .img-fallback{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:48px;background:linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%);border-radius:20px}
  </style>
</head>
<body>
  <div id="app" class="min-h-screen flex flex-col p-4 md:p-8 max-w-5xl mx-auto">
    <header class="flex flex-col items-center gap-4 md:gap-6 relative pt-14 md:pt-0">
      <div class="absolute left-0 top-0 z-50">
        <button id="install-btn" class="install-btn clay-button bg-white px-3 py-2 md:px-4 md:py-3 hover-wobble items-center gap-2 min-h-[44px]">
          <div class="bg-green-100 p-1 rounded-full">
            <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
          </div>
          <span id="install-text" class="text-xs md:text-base font-bold text-[#4a4a4a]">Install App</span>
        </button>
      </div>
      <div class="absolute right-0 top-0 z-50">
        <div id="lang-switcher" class="lang-switcher">
          <button id="lang-btn" class="clay-button bg-white px-3 py-2 md:px-4 md:py-3 hover-wobble flex items-center gap-2 min-w-[120px] md:min-w-[150px] justify-between shadow-md">
            <div class="flex items-center gap-2">
              <div class="bg-blue-100 p-1 rounded-full">
                <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9h18"/></svg>
              </div>
              <span id="current-lang" class="text-xs md:text-base font-bold text-[#4a4a4a]">English</span>
            </div>
            <svg id="lang-chevron" class="w-4 h-4 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 9l-7 7-7-7"/></svg>
          </button>
          <div id="lang-dropdown" class="lang-dropdown clay-card bg-white"></div>
        </div>
      </div>
      <div class="logo-container flex items-center justify-center mt-4 md:mt-0"><div class="logo-fallback animate-float"><span>ðŸ˜œ</span></div></div>
      <h1 id="app-title" class="text-3xl md:text-6xl lg:text-7xl text-[#4a4a4a] tracking-tight animate-float select-none text-center px-4 leading-tight font-black">Fun Face Game</h1>
    </header>
    <main class="flex-grow py-8">
      <div id="game-grid" class="game-grid"></div>
      <div id="adsense-lobby-bottom" class="ad-placeholder mt-12"><span class="opacity-30">AD SPACE</span></div>
    </main>
    <footer class="mt-8 border-t-4 border-gray-200 pt-8 pb-4 flex flex-col md:flex-row items-center justify-between gap-6 text-[#4a4a4a]">
      <div id="copyright" class="text-sm font-bold opacity-60">Â© 2024 Fun Face Game Studio. All rights reserved.</div>
      <nav class="flex flex-wrap justify-center gap-6">
        <button id="btn-about" class="footer-link about">About Us</button>
        <button id="btn-privacy" class="footer-link privacy">Privacy Policy</button>
        <button id="btn-contact" class="footer-link contact">Contact</button>
      </nav>
    </footer>
  </div>
  <div id="modal-overlay" class="modal-overlay">
    <div class="modal-content clay-card bg-white relative" onclick="event.stopPropagation()">
      <button class="modal-close" onclick="FunFaceGame.closeModal()">Ã—</button>
      <h2 id="modal-title" class="text-2xl md:text-3xl font-bold mb-6 text-[#4a4a4a] border-b-4 border-gray-100 pb-2"></h2>
      <div id="modal-body" class="text-base md:text-lg leading-relaxed text-gray-700 whitespace-pre-wrap font-sans"></div>
      <button onclick="FunFaceGame.closeModal()" class="clay-button bg-blue-500 text-white w-full mt-8 py-3 text-lg md:text-xl font-bold">OK!</button>
    </div>
  </div>
  <script>
    (function(){
      'use strict';
      
      // I18n å¤šèªžè¨€ç³»çµ±
      var I18n = (function(){
        var currentLanguage = 'en';
        var translations = {
          'en': { _langName:'English', 'app.title':'Fun Face Game', 'app.tagline':'Make Every Face Fun!', 'app.install':'Install App', 'game.faceCrush':'Face Crush', 'game.faceSlicer':'Face Slicer', 'game.whacAFace':'Whac-A-Face', 'game.facePop':'Face Pop', 'game.faceStack':'Face Stack', 'game.faceMemory':'Face Memory', 'game.comingSoon':'Coming Soon', 'footer.aboutUs':'About Us', 'footer.privacy':'Privacy Policy', 'footer.contact':'Contact Us', 'footer.copyright':'Â© 2024 Fun Face Game. All rights reserved.', 'about.title':'About Us', 'about.content':'We leverage cutting-edge AI technology to create hilarious moments for families and friends.', 'privacy.title':'Privacy Policy', 'privacy.content':'Your privacy is our priority. All face photos are processed entirely within your browser and are **never uploaded to our servers**.', 'contact.title':'Contact Us', 'contact.content':'Got questions or feedback? We\'d love to hear from you!', 'contact.email':'Email: support@funfacegame.com' },
          'zh-TW': { _langName:'ç¹é«”ä¸­æ–‡', 'app.title':'è¶£å‘³è‡‰éƒ¨éŠæˆ²', 'app.tagline':'è®“æ¯å¼µè‡‰éƒ½è®Šå¾—æœ‰è¶£ï¼', 'app.install':'å®‰è£éŠæˆ²', 'game.faceCrush':'è‡‰éƒ¨ç²‰ç¢Ž', 'game.faceSlicer':'è‡‰éƒ¨åˆ‡åˆ‡æ¨‚', 'game.whacAFace':'æ‰“è‡‰é¼ ', 'game.facePop':'è‡‰éƒ¨æ°£çƒ', 'game.faceStack':'è‡‰éƒ¨ç–Šç–Šæ¨‚', 'game.faceMemory':'è‡‰éƒ¨è¨˜æ†¶', 'game.comingSoon':'æ•¬è«‹æœŸå¾…', 'footer.aboutUs':'é—œæ–¼æˆ‘å€‘', 'footer.privacy':'éš±ç§æ¬Šæ”¿ç­–', 'footer.contact':'è¯çµ¡æˆ‘å€‘', 'footer.copyright':'Â© 2024 è¶£å‘³è‡‰éƒ¨éŠæˆ²ã€‚ç‰ˆæ¬Šæ‰€æœ‰ã€‚', 'about.title':'é—œæ–¼æˆ‘å€‘', 'about.content':'æˆ‘å€‘åˆ©ç”¨æœ€å…ˆé€²çš„ AI ç§‘æŠ€ï¼Œç‚ºå®¶äººå’Œæœ‹å‹å‰µé€ æ­¡æ¨‚æ™‚åˆ»ã€‚', 'privacy.title':'éš±ç§æ¬Šæ”¿ç­–', 'privacy.content':'æˆ‘å€‘æ¥µåº¦é‡è¦–æ‚¨çš„éš±ç§ã€‚æ‰€æœ‰è‡‰éƒ¨ç…§ç‰‡å‡ç›´æŽ¥åœ¨æ‚¨çš„ç€è¦½å™¨ä¸­è™•ç†ï¼Œ**çµ•ä¸æœƒä¸Šå‚³è‡³æˆ‘å€‘çš„ä¼ºæœå™¨**ã€‚', 'contact.title':'è¯çµ¡æˆ‘å€‘', 'contact.content':'æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°å—Žï¼Ÿ', 'contact.email':'é›»å­éƒµä»¶ï¼šsupport@funfacegame.com' },
          'zh-CN': { _langName:'ç®€ä½“ä¸­æ–‡', 'app.title':'è¶£å‘³è„¸éƒ¨æ¸¸æˆ', 'app.tagline':'è®©æ¯å¼ è„¸éƒ½å˜å¾—æœ‰è¶£ï¼', 'app.install':'å®‰è£…æ¸¸æˆ', 'game.faceCrush':'è„¸éƒ¨ç²‰ç¢Ž', 'game.faceSlicer':'è„¸éƒ¨åˆ‡åˆ‡ä¹', 'game.whacAFace':'æ‰“è„¸é¼ ', 'game.facePop':'è„¸éƒ¨æ°”çƒ', 'game.faceStack':'è„¸éƒ¨å å ä¹', 'game.faceMemory':'è„¸éƒ¨è®°å¿†', 'game.comingSoon':'æ•¬è¯·æœŸå¾…', 'footer.aboutUs':'å…³äºŽæˆ‘ä»¬', 'footer.privacy':'éšç§æƒæ”¿ç­–', 'footer.contact':'è”ç³»æˆ‘ä»¬', 'footer.copyright':'Â© 2024 è¶£å‘³è„¸éƒ¨æ¸¸æˆã€‚ç‰ˆæƒæ‰€æœ‰ã€‚', 'about.title':'å…³äºŽæˆ‘ä»¬', 'about.content':'æˆ‘ä»¬åˆ©ç”¨å…ˆè¿›çš„ AI ç§‘æŠ€ï¼Œä¸ºå®¶äººå’Œæœ‹å‹åˆ›é€ æ¬¢ä¹æ—¶åˆ»ã€‚', 'privacy.title':'éšç§æƒæ”¿ç­–', 'privacy.content':'æˆ‘ä»¬æžåº¦é‡è§†æ‚¨çš„éšç§ã€‚æ‰€æœ‰è„¸éƒ¨ç…§ç‰‡å‡ç›´æŽ¥åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­å¤„ç†ï¼Œ**ç»ä¸ä¼šä¸Šä¼ è‡³æˆ‘ä»¬çš„æœåŠ¡å™¨**ã€‚', 'contact.title':'è”ç³»æˆ‘ä»¬', 'contact.content':'æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®å—ï¼Ÿ', 'contact.email':'ç”µå­é‚®ä»¶ï¼šsupport@funfacegame.com' },
          'ja': { _langName:'æ—¥æœ¬èªž', 'app.title':'å¤‰é¡”ã‚²ãƒ¼ãƒ ', 'app.tagline':'ã™ã¹ã¦ã®é¡”ã‚’æ¥½ã—ãï¼', 'app.install':'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«', 'game.faceCrush':'ãƒ•ã‚§ã‚¤ã‚¹ãƒ»ã‚¯ãƒ©ãƒƒã‚·ãƒ¥', 'game.faceSlicer':'ãƒ•ã‚§ã‚¤ã‚¹ãƒ»ã‚¹ãƒ©ã‚¤ã‚µãƒ¼', 'game.whacAFace':'ãƒ¢ã‚°ãƒ©ãŸãŸãé¡”', 'game.facePop':'ãƒ•ã‚§ã‚¤ã‚¹ãƒ»ãƒãƒ«ãƒ¼ãƒ³', 'game.faceStack':'ãƒ•ã‚§ã‚¤ã‚¹ãƒ»ã‚¹ã‚¿ãƒƒã‚¯', 'game.faceMemory':'é¡”è¨˜æ†¶', 'game.comingSoon':'è¿‘æ—¥å…¬é–‹', 'footer.aboutUs':'ä¼šç¤¾æ¦‚è¦', 'footer.privacy':'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼', 'footer.contact':'ãŠå•ã„åˆã‚ã›', 'footer.copyright':'Â© 2024 å¤‰é¡”ã‚²ãƒ¼ãƒ ã€‚', 'about.title':'ä¼šç¤¾æ¦‚è¦', 'about.content':'æœ€æ–°ã®AIæŠ€è¡“ã‚’æ´»ç”¨ã—ã¦ã€ç¬‘ã„ã‚’æä¾›ã—ã¾ã™ã€‚', 'privacy.title':'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼', 'privacy.content':'ãŠå®¢æ§˜ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¯æœ€å„ªå…ˆäº‹é …ã§ã™ã€‚ã™ã¹ã¦ã®é¡”å†™çœŸã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å‡¦ç†ã•ã‚Œã¾ã™ã€‚', 'contact.title':'ãŠå•ã„åˆã‚ã›', 'contact.content':'ã”è³ªå•ãŒã”ã–ã„ã¾ã™ã‹ï¼Ÿ', 'contact.email':'ãƒ¡ãƒ¼ãƒ«ï¼šsupport@funfacegame.com' },
          'de': { _langName:'Deutsch', 'app.title':'Lustiges Gesichtsspiel', 'app.tagline':'Mach jedes Gesicht lustig!', 'app.install':'Installieren', 'game.faceCrush':'Gesichts-Crush', 'game.faceSlicer':'Gesichts-Schneider', 'game.whacAFace':'Gesichts-Hammer', 'game.facePop':'Gesichts-Balloon', 'game.faceStack':'Gesichts-Stapel', 'game.faceMemory':'Gesichts-Memory', 'game.comingSoon':'DemnÃ¤chst', 'footer.aboutUs':'Ãœber uns', 'footer.privacy':'Datenschutz', 'footer.contact':'Kontakt', 'footer.copyright':'Â© 2024 Lustiges Gesichtsspiel.', 'about.title':'Ãœber uns', 'about.content':'Wir nutzen modernste KI-Technologie.', 'privacy.title':'Datenschutz', 'privacy.content':'Ihre PrivatsphÃ¤re ist unsere PrioritÃ¤t.', 'contact.title':'Kontakt', 'contact.content':'Haben Sie Fragen?', 'contact.email':'E-Mail: support@funfacegame.com' },
          'es': { _langName:'EspaÃ±ol', 'app.title':'Juego de Caras Locas', 'app.tagline':'Â¡Haz cada cara divertida!', 'app.install':'Instalar', 'game.faceCrush':'Cara Aplastada', 'game.faceSlicer':'Cortador de Caras', 'game.whacAFace':'Golpea la Cara', 'game.facePop':'Globo de Cara', 'game.faceStack':'Apila Caras', 'game.faceMemory':'Memoria de Caras', 'game.comingSoon':'PrÃ³ximamente', 'footer.aboutUs':'Nosotros', 'footer.privacy':'Privacidad', 'footer.contact':'Contacto', 'footer.copyright':'Â© 2024 Juego de Caras Locas.', 'about.title':'Nosotros', 'about.content':'Aprovechamos la tecnologÃ­a de IA.', 'privacy.title':'Privacidad', 'privacy.content':'Su privacidad es nuestra prioridad.', 'contact.title':'Contacto', 'contact.content':'Â¿Tiene preguntas?', 'contact.email':'Correo: support@funfacegame.com' },
          'id': { _langName:'Bahasa Indonesia', 'app.title':'Game Wajah Lucu', 'app.tagline':'Buat Setiap Wajah Menyenangkan!', 'app.install':'Instal', 'game.faceCrush':'Hancurkan Wajah', 'game.faceSlicer':'Potong Wajah', 'game.whacAFace':'Pukul Wajah', 'game.facePop':'Balon Wajah', 'game.faceStack':'Tumpuk Wajah', 'game.faceMemory':'Ingatan Wajah', 'game.comingSoon':'Segera Hadir', 'footer.aboutUs':'Tentang Kami', 'footer.privacy':'Privasi', 'footer.contact':'Kontak', 'footer.copyright':'Â© 2024 Game Wajah Lucu.', 'about.title':'Tentang Kami', 'about.content':'Kami memanfaatkan teknologi AI.', 'privacy.title':'Privasi', 'privacy.content':'Privasi Anda prioritas kami.', 'contact.title':'Kontak', 'contact.content':'Punya pertanyaan?', 'contact.email':'Email: support@funfacegame.com' },
          'vi': { _langName:'Tiáº¿ng Viá»‡t', 'app.title':'TrÃ² ChÆ¡i KhuÃ´n Máº·t Vui', 'app.tagline':'LÃ m Má»—i KhuÃ´n Máº·t Vui Váº»!', 'app.install':'CÃ i Ä‘áº·t', 'game.faceCrush':'Äáº­p Máº·t', 'game.faceSlicer':'Cáº¯t Máº·t', 'game.whacAFace':'ÄÃ¡nh Máº·t', 'game.facePop':'BÃ³ng Bay Máº·t', 'game.faceStack':'Xáº¿p Máº·t', 'game.faceMemory':'TrÃ­ Nhá»› Máº·t', 'game.comingSoon':'Sáº¯p Ra Máº¯t', 'footer.aboutUs':'Vá» ChÃºng TÃ´i', 'footer.privacy':'Báº£o Máº­t', 'footer.contact':'LiÃªn Há»‡', 'footer.copyright':'Â© 2024 TrÃ² ChÆ¡i KhuÃ´n Máº·t Vui.', 'about.title':'Vá» ChÃºng TÃ´i', 'about.content':'ChÃºng tÃ´i táº­n dá»¥ng cÃ´ng nghá»‡ AI.', 'privacy.title':'Báº£o Máº­t', 'privacy.content':'Quyá»n riÃªng tÆ° lÃ  Æ°u tiÃªn.', 'contact.title':'LiÃªn Há»‡', 'contact.content':'CÃ³ cÃ¢u há»i?', 'contact.email':'Email: support@funfacegame.com' }
        };
        function t(key){ var lang = translations[currentLanguage] || translations['en']; return lang[key] || translations['en'][key] || key; }
        function setLanguage(code){ if(translations[code]){ currentLanguage = code; return true; } return false; }
        function getCurrentLanguage(){ return currentLanguage; }
        function getLanguageName(code){ var lang = translations[code]; return lang ? lang._langName : code; }
        function getSupportedLanguages(){ return Object.keys(translations).map(function(code){ return { code: code, name: translations[code]._langName }; }); }
        function isSupported(code){ return !!translations[code]; }
        return { t:t, setLanguage:setLanguage, getCurrentLanguage:getCurrentLanguage, getLanguageName:getLanguageName, getSupportedLanguages:getSupportedLanguages, isSupported:isSupported };
      })();
      window.I18n = I18n;
      
      // éŠæˆ²è¨­å®š
      var GAMES = [
        { id:'face-crush', nameKey:'game.faceCrush', image:'./assets/images/buttons/button-face-crush.png', fallbackEmoji:'ðŸ’¥', path:'./plugins/face-crush/index.html', enabled:true },
        { id:'face-slicer', nameKey:'game.faceSlicer', image:'./assets/images/buttons/button-face-warp.png', fallbackEmoji:'ðŸ”ª', path:'./plugins/face-slicer/index.html', enabled:false },
        { id:'whac-a-face', nameKey:'game.whacAFace', image:'./assets/images/buttons/button-more.png', fallbackEmoji:'ðŸ”¨', path:'./plugins/whac-a-face/index.html', enabled:false },
        { id:'face-pop', nameKey:'game.facePop', image:'./assets/images/buttons/button-more.png', fallbackEmoji:'ðŸŽˆ', path:'./plugins/face-pop/index.html', enabled:false },
        { id:'face-stack', nameKey:'game.faceStack', image:'./assets/images/buttons/button-more.png', fallbackEmoji:'ðŸ“š', path:'./plugins/face-stack/index.html', enabled:false },
        { id:'face-memory', nameKey:'game.faceMemory', image:'./assets/images/buttons/button-face-memory.png', fallbackEmoji:'ðŸ§ ', path:'./plugins/face-memory/index.html', enabled:false }
      ];
      
      var currentLang = 'en';
      var deferredPrompt = null;
      var DOM = {};
      
      function init(){
        cacheDOM();
        detectLanguage();
        renderLanguageOptions();
        renderGameGrid();
        updateTexts();
        bindEvents();
        setupPWAInstall();
        console.log('[FunFaceGame] Initialized');
      }
      
      function cacheDOM(){
        DOM.appTitle = document.getElementById('app-title');
        DOM.langSwitcher = document.getElementById('lang-switcher');
        DOM.langBtn = document.getElementById('lang-btn');
        DOM.langDropdown = document.getElementById('lang-dropdown');
        DOM.langChevron = document.getElementById('lang-chevron');
        DOM.currentLang = document.getElementById('current-lang');
        DOM.gameGrid = document.getElementById('game-grid');
        DOM.installBtn = document.getElementById('install-btn');
        DOM.installText = document.getElementById('install-text');
        DOM.btnAbout = document.getElementById('btn-about');
        DOM.btnPrivacy = document.getElementById('btn-privacy');
        DOM.btnContact = document.getElementById('btn-contact');
        DOM.copyright = document.getElementById('copyright');
        DOM.modalOverlay = document.getElementById('modal-overlay');
        DOM.modalTitle = document.getElementById('modal-title');
        DOM.modalBody = document.getElementById('modal-body');
      }
      
      function detectLanguage(){
        try {
          var saved = localStorage.getItem('fun_face_game_language');
          if(saved && I18n.isSupported(saved)){ currentLang = saved; I18n.setLanguage(currentLang); return; }
        } catch(e){}
        var browserLang = navigator.language || 'en';
        if(browserLang.indexOf('zh-TW') >= 0 || browserLang.indexOf('zh-HK') >= 0) currentLang = 'zh-TW';
        else if(browserLang.indexOf('zh') >= 0) currentLang = 'zh-CN';
        else if(browserLang.indexOf('ja') === 0) currentLang = 'ja';
        else if(browserLang.indexOf('de') === 0) currentLang = 'de';
        else if(browserLang.indexOf('es') === 0) currentLang = 'es';
        else if(browserLang.indexOf('id') === 0) currentLang = 'id';
        else if(browserLang.indexOf('vi') === 0) currentLang = 'vi';
        else currentLang = 'en';
        I18n.setLanguage(currentLang);
        try { localStorage.setItem('fun_face_game_language', currentLang); } catch(e){}
      }
      
      function t(key){ return I18n.t(key); }
      
      function renderLanguageOptions(){
        var languages = I18n.getSupportedLanguages();
        var html = '';
        for(var i=0; i<languages.length; i++){
          var lang = languages[i];
          html += '<button class="lang-option' + (lang.code === currentLang ? ' active' : '') + '" data-lang="' + lang.code + '">' + lang.name + '</button>';
        }
        DOM.langDropdown.innerHTML = html;
        var cur = languages.filter(function(l){ return l.code === currentLang; })[0];
        if(DOM.currentLang && cur) DOM.currentLang.textContent = cur.name;
      }
      
      function renderGameGrid(){
        var html = '';
        for(var i=0; i<GAMES.length; i++){
          var game = GAMES[i];
          var isDisabled = !game.enabled;
          var gameName = t(game.nameKey);
          html += '<div class="flex flex-col items-center gap-4 md:gap-5 transition-all duration-500' + (isDisabled ? ' opacity-80' : '') + '">';
          html += '<a href="' + (isDisabled ? 'javascript:void(0)' : game.path) + '" class="clay-card game-card w-full group flex items-center justify-center bg-white' + (isDisabled ? ' disabled cursor-default' : ' cursor-pointer hover:shadow-2xl') + '" data-game="' + game.id + '"' + (isDisabled ? ' onclick="return false;"' : '') + '>';
          html += '<div class="relative w-full h-full flex items-center justify-center">';
          html += '<img src="' + game.image + '" alt="' + gameName + '" class="relative z-20" loading="lazy" onerror="this.style.display=\'none\';this.nextElementSibling.style.display=\'flex\';">';
          html += '<div class="img-fallback" style="display:none;position:absolute;z-index:20;">' + game.fallbackEmoji + '</div>';
          html += '<span class="absolute inset-0 flex items-center justify-center text-[#4a4a4a] opacity-20 font-black text-2xl md:text-4xl text-center p-4 z-10 select-none">' + gameName + '</span>';
          html += '</div>';
          if(isDisabled) html += '<div class="coming-soon-badge"><span>' + t('game.comingSoon') + '</span></div>';
          html += '</a>';
          html += '<h3 class="text-lg md:text-2xl font-black text-center text-[#4a4a4a] drop-shadow-sm px-2">' + gameName + '</h3>';
          html += '</div>';
        }
        DOM.gameGrid.innerHTML = html;
      }
      
      function updateTexts(){
        if(DOM.appTitle) DOM.appTitle.textContent = t('app.title');
        document.title = t('app.title') + ' - ' + t('app.tagline');
        if(DOM.installText) DOM.installText.textContent = t('app.install');
        if(DOM.btnAbout) DOM.btnAbout.textContent = t('footer.aboutUs');
        if(DOM.btnPrivacy) DOM.btnPrivacy.textContent = t('footer.privacy');
        if(DOM.btnContact) DOM.btnContact.textContent = t('footer.contact');
        if(DOM.copyright) DOM.copyright.textContent = t('footer.copyright');
        document.documentElement.lang = currentLang;
        renderGameGrid();
      }
      
      function bindEvents(){
        if(DOM.langBtn){
          DOM.langBtn.addEventListener('click', function(e){
            e.stopPropagation();
            DOM.langSwitcher.classList.toggle('open');
            DOM.langChevron.style.transform = DOM.langSwitcher.classList.contains('open') ? 'rotate(180deg)' : '';
          });
        }
        if(DOM.langDropdown){
          DOM.langDropdown.addEventListener('click', function(e){
            var option = e.target.closest('.lang-option');
            if(!option) return;
            var newLang = option.getAttribute('data-lang');
            if(newLang === currentLang){ closeLangDropdown(); return; }
            currentLang = newLang;
            I18n.setLanguage(currentLang);
            try { localStorage.setItem('fun_face_game_language', currentLang); } catch(ex){}
            renderLanguageOptions();
            updateTexts();
            closeLangDropdown();
          });
        }
        document.addEventListener('click', function(){ closeLangDropdown(); });
        document.addEventListener('keydown', function(e){ if(e.key === 'Escape'){ closeLangDropdown(); closeModal(); } });
        if(DOM.modalOverlay){
          DOM.modalOverlay.addEventListener('click', function(e){ if(e.target === DOM.modalOverlay) closeModal(); });
        }
        if(DOM.btnAbout) DOM.btnAbout.addEventListener('click', function(){ showModal('about'); });
        if(DOM.btnPrivacy) DOM.btnPrivacy.addEventListener('click', function(){ showModal('privacy'); });
        if(DOM.btnContact) DOM.btnContact.addEventListener('click', function(){ showModal('contact'); });
      }
      
      function closeLangDropdown(){
        if(DOM.langSwitcher) DOM.langSwitcher.classList.remove('open');
        if(DOM.langChevron) DOM.langChevron.style.transform = '';
      }
      
      function showModal(type){
        var content = {
          about: { title: t('about.title'), body: t('about.content') },
          privacy: { title: t('privacy.title'), body: t('privacy.content') + '\n\n<div class="mt-6 text-xs bg-gray-50 p-4 rounded-xl border-2 border-dashed border-gray-200"><p class="font-bold mb-2 opacity-60 uppercase tracking-wider">AdSense Compliance Note:</p><p class="opacity-70">This website complies with standard web safety protocols.</p></div>' },
          contact: { title: t('contact.title'), body: t('contact.content') + '\n\n' + t('contact.email') }
        };
        var data = content[type];
        if(!data) return;
        if(DOM.modalTitle) DOM.modalTitle.textContent = data.title;
        if(DOM.modalBody) DOM.modalBody.innerHTML = formatText(data.body);
        if(DOM.modalOverlay) DOM.modalOverlay.classList.add('show');
      }
      
      function closeModal(){
        if(DOM.modalOverlay) DOM.modalOverlay.classList.remove('show');
      }
      
      function formatText(text){
        return text.replace(/\*\*(.*?)\*\*/g, '<strong class="text-blue-600 font-bold">$1</strong>');
      }
      
      function setupPWAInstall(){
        window.addEventListener('beforeinstallprompt', function(e){
          e.preventDefault();
          deferredPrompt = e;
          if(DOM.installBtn) DOM.installBtn.classList.add('show');
        });
        if(DOM.installBtn){
          DOM.installBtn.addEventListener('click', function(){
            if(!deferredPrompt) return;
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then(function(result){
              deferredPrompt = null;
              DOM.installBtn.classList.remove('show');
            });
          });
        }
        window.addEventListener('appinstalled', function(){
          if(DOM.installBtn) DOM.installBtn.classList.remove('show');
          deferredPrompt = null;
        });
      }
      
      window.FunFaceGame = {
        showModal: showModal,
        closeModal: closeModal,
        setLanguage: function(lang){
          if(I18n.isSupported(lang)){
            currentLang = lang;
            I18n.setLanguage(lang);
            try { localStorage.setItem('fun_face_game_language', lang); } catch(e){}
            renderLanguageOptions();
            updateTexts();
          }
        },
        getLanguage: function(){ return currentLang; }
      };
      
      if(document.readyState === 'loading'){
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
  <script>
    if('serviceWorker' in navigator){
      window.addEventListener('load', function(){
        navigator.serviceWorker.register('./sw.js').then(function(reg){
          console.log('[App] SW registered:', reg.scope);
        }).catch(function(err){
          console.warn('[App] SW registration failed:', err);
        });
      });
    }
  </script>
</body>
</html>
