<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Fun Face Game - The most hilarious AI face game platform!">
  
  <!-- PWA Meta Tags -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#FFD93D">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="FunFace">
  <link rel="apple-touch-icon" href="./assets/images/icons/icon-192.png">
  
  <title>Fun Face Game - Make Every Face Fun!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{font-family:'Fredoka One','Noto Sans TC',cursive,sans-serif;background:#fffdf2;color:#4a4a4a;min-height:100vh;margin:0;padding:0;overflow-x:hidden}
    
    /* Clay È¢®Ê†ºÂç°Áâá */
    .clay-card{
      border:6px solid #4a4a4a;
      border-radius:40px;
      box-shadow:0 14px 0 #4a4a4a,inset 0 -10px 0 rgba(0,0,0,.05);
      transition:all .3s cubic-bezier(.175,.885,.32,1.275);
      background:#fff;
      position:relative;
      overflow:hidden
    }
    .clay-card:active{transform:translateY(10px);box-shadow:0 4px 0 #4a4a4a,inset 0 -10px 0 rgba(0,0,0,.05)}
    
    /* Clay È¢®Ê†ºÊåâÈàï */
    .clay-button{
      border:4px solid #4a4a4a;
      border-radius:22px;
      box-shadow:0 6px 0 #4a4a4a;
      transition:all .15s ease;
      background:#fff;
      cursor:pointer;
      font-family:inherit
    }
    .clay-button:hover{transform:translateY(-2px);box-shadow:0 8px 0 #4a4a4a}
    .clay-button:active{transform:translateY(4px);box-shadow:0 2px 0 #4a4a4a}
    
    /* ÂãïÁï´ÊïàÊûú */
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
    @keyframes wobble{
      0%{transform:rotate(0deg) scale(1)}
      15%{transform:rotate(-8deg) scale(1.05)}
      30%{transform:rotate(6deg) scale(1.08)}
      45%{transform:rotate(-6deg) scale(1.05)}
      60%{transform:rotate(4deg) scale(1.03)}
      75%{transform:rotate(-2deg) scale(1.01)}
      100%{transform:rotate(0deg) scale(1)}
    }
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    @keyframes rotate-in{0%{opacity:0;transform:rotate(-10deg) scale(.8)}100%{opacity:1;transform:rotate(0) scale(1)}}
    
    .animate-float{animation:float 4s ease-in-out infinite}
    .animate-bounce{animation:bounce 1s ease-in-out infinite}
    
    /* ÈÅäÊà≤Âç°Áâá */
    .game-card{
      aspect-ratio:1;
      padding:0;
      text-decoration:none;
      cursor:pointer;
      transition:transform 0.3s ease, box-shadow 0.3s ease;
      overflow:visible;
    }
    .game-card:hover{
      animation:wobble 0.6s ease-in-out;
      box-shadow:0 18px 0 #4a4a4a,inset 0 -10px 0 rgba(0,0,0,.05);
    }
    .game-card:active{
      transform:translateY(10px) scale(0.98);
      box-shadow:0 4px 0 #4a4a4a,inset 0 -10px 0 rgba(0,0,0,.05);
    }
    
    /* ÈÅäÊà≤Âç°ÁâáÂúñÁâá - Â°´ÊªøÊï¥ÂÄãÂç°Áâá */
    .game-card-inner{
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      border-radius:34px;
    }
    .game-card img{
      width:100%;
      height:100%;
      object-fit:cover;
      transition:transform 0.3s ease;
    }
    .game-card:hover img{
      transform:scale(1.08);
    }
    
    /* ÈÅäÊà≤ÂêçÁ®±Ê®ôÁ±§ */
    .game-name{
      position:absolute;
      bottom:-12px;
      left:50%;
      transform:translateX(-50%);
      background:#4a4a4a;
      color:white;
      padding:8px 20px;
      border-radius:20px;
      font-size:13px;
      font-weight:700;
      white-space:nowrap;
      box-shadow:0 4px 8px rgba(0,0,0,0.2);
      z-index:20;
    }
    @media(min-width:768px){.game-name{font-size:16px;padding:10px 24px;bottom:-14px}}
    
    /* ÈÅäÊà≤Á∂≤Ê†º */
    .game-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:2.5rem 1.5rem}
    @media(min-width:768px){.game-grid{gap:3.5rem 2.5rem}}
    @media(min-width:1024px){.game-grid{grid-template-columns:repeat(3,1fr)}}
    
    /* Logo */
    .logo-container{width:120px;height:120px}
    @media(min-width:768px){.logo-container{width:150px;height:150px}}
    .logo-img{
      width:100%;
      height:100%;
      object-fit:contain;
      filter:drop-shadow(0 8px 16px rgba(0,0,0,0.15));
      transition:transform 0.3s ease;
    }
    .logo-img:hover{transform:scale(1.1) rotate(-5deg)}
    
    /* Ë™ûË®ÄÂàáÊèõ */
    .lang-switcher{position:relative}
    .lang-dropdown{display:none;position:absolute;right:0;top:calc(100% + 8px);min-width:150px;z-index:100;padding:8px 0}
    .lang-switcher.open .lang-dropdown{display:block;animation:rotate-in .3s ease forwards}
    .lang-option{display:block;width:100%;text-align:left;padding:10px 16px;font-size:14px;font-weight:700;color:#4a4a4a;background:0 0;border:none;cursor:pointer;transition:background .2s}
    .lang-option:hover{background:#FEF3C7}
    .lang-option.active{color:#3B82F6;background:#EFF6FF}
    
    /* Âª£ÂëäÂçÄ */
    .ad-placeholder{width:100%;height:100px;background:0 0;border:4px dashed #e5e7eb;border-radius:24px;display:flex;align-items:center;justify-content:center;color:#d1d5db;font-weight:700}
    @media(min-width:768px){.ad-placeholder{height:150px}}
    
    /* Footer */
    .footer-link{font-weight:700;text-decoration:underline;text-underline-offset:4px;text-decoration-thickness:4px;transition:color .2s;background:0 0;border:none;cursor:pointer;font-family:inherit;font-size:inherit;color:inherit}
    .footer-link:hover{color:#3B82F6}
    .footer-link.about{text-decoration-color:#BFDBFE}
    .footer-link.privacy{text-decoration-color:#A7F3D0}
    .footer-link.contact{text-decoration-color:#DDD6FE}
    
    /* Modal */
    .modal-overlay{position:fixed;inset:0;z-index:60;display:none;align-items:center;justify-content:center;padding:16px;background:rgba(0,0,0,.4);backdrop-filter:blur(4px)}
    .modal-overlay.show{display:flex}
    .modal-content{width:100%;max-width:500px;max-height:85vh;overflow-y:auto;padding:24px;animation:rotate-in .3s ease forwards}
    @media(min-width:768px){.modal-content{padding:32px}}
    .modal-close{position:absolute;right:16px;top:16px;font-size:28px;font-weight:700;color:#9ca3af;background:0 0;border:none;cursor:pointer;transition:transform .2s,color .2s;line-height:1}
    .modal-close:hover{transform:scale(1.2);color:#4a4a4a}
    
    /* ÂÆâË£ùÊåâÈàï */
    .install-btn{display:none;background:linear-gradient(135deg,#22c55e,#16a34a);color:white;border-color:#15803d}
    .install-btn.show{display:flex}
    .install-btn:hover{background:linear-gradient(135deg,#16a34a,#15803d)}
    
    /* iOS ÂÆâË£ùÊèêÁ§∫ */
    .ios-install-hint{display:none;position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:white;border-radius:16px;padding:16px 20px;box-shadow:0 10px 40px rgba(0,0,0,0.2);z-index:1000;max-width:320px;text-align:center;animation:rotate-in .3s ease}
    .ios-install-hint.show{display:block}
    .ios-install-hint-close{position:absolute;top:8px;right:8px;background:none;border:none;font-size:20px;cursor:pointer;color:#9ca3af}
    
    /* Fallback */
    .img-fallback{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:64px;background:linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%);border-radius:30px}
  </style>
</head>
<body>
  <div id="app" class="min-h-screen flex flex-col p-4 md:p-8 max-w-5xl mx-auto">
    <header class="flex flex-col items-center gap-4 md:gap-6 relative pt-14 md:pt-0">
      <!-- ÂÆâË£ùÊåâÈàï -->
      <div class="absolute left-0 top-0 z-50">
        <button id="install-btn" class="install-btn clay-button px-3 py-2 md:px-4 md:py-3 items-center gap-2 min-h-[44px]" onclick="handleInstallClick()">
          <span class="text-lg">üì≤</span>
          <span id="install-text" class="text-xs md:text-base font-bold">Install</span>
        </button>
      </div>
      
      <!-- Ë™ûË®ÄÂàáÊèõ -->
      <div class="absolute right-0 top-0 z-50">
        <div id="lang-switcher" class="lang-switcher">
          <button id="lang-btn" class="clay-button bg-white px-3 py-2 md:px-4 md:py-3 flex items-center gap-2 min-w-[100px] md:min-w-[140px] justify-between">
            <div class="flex items-center gap-2">
              <span class="text-lg">üåê</span>
              <span id="current-lang" class="text-xs md:text-base font-bold text-[#4a4a4a]">English</span>
            </div>
            <svg id="lang-chevron" class="w-4 h-4 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 9l-7 7-7-7"/></svg>
          </button>
          <div id="lang-dropdown" class="lang-dropdown clay-card bg-white"></div>
        </div>
      </div>
      
      <!-- Logo -->
      <div class="logo-container flex items-center justify-center mt-4 md:mt-0">
        <img src="./assets/images/funfacegame-logo.png" alt="Fun Face Game" class="logo-img animate-float" onerror="this.outerHTML='<div class=\'logo-img animate-float\' style=\'font-size:80px\'>ü¶í</div>'">
      </div>
      
      <!-- Ê®ôÈ°å -->
      <h1 id="app-title" class="text-3xl md:text-5xl lg:text-6xl text-[#4a4a4a] tracking-tight select-none text-center px-4 leading-tight font-black">Fun Face Game</h1>
    </header>
    
    <main class="flex-grow py-8 md:py-12">
      <div id="game-grid" class="game-grid"></div>
      <div id="adsense-lobby-bottom" class="ad-placeholder mt-12"><span class="opacity-50">AD SPACE</span></div>
    </main>
    
    <footer class="mt-8 border-t-4 border-gray-200 pt-8 pb-4 flex flex-col md:flex-row items-center justify-between gap-6 text-[#4a4a4a]">
      <div id="copyright" class="text-sm font-bold opacity-60">¬© 2024 Fun Face Game Studio</div>
      <nav class="flex flex-wrap justify-center gap-6">
        <button id="btn-about" class="footer-link about">About</button>
        <button id="btn-privacy" class="footer-link privacy">Privacy</button>
        <button id="btn-contact" class="footer-link contact">Contact</button>
      </nav>
    </footer>
  </div>
  
  <!-- Modal -->
  <div id="modal-overlay" class="modal-overlay">
    <div class="modal-content clay-card bg-white relative" onclick="event.stopPropagation()">
      <button class="modal-close" onclick="FunFaceGame.closeModal()">√ó</button>
      <h2 id="modal-title" class="text-2xl md:text-3xl font-bold mb-6 text-[#4a4a4a] border-b-4 border-gray-100 pb-2"></h2>
      <div id="modal-body" class="text-base md:text-lg leading-relaxed text-gray-700 whitespace-pre-wrap font-sans"></div>
      <button onclick="FunFaceGame.closeModal()" class="clay-button bg-blue-500 text-white w-full mt-8 py-3 text-lg md:text-xl font-bold">OK!</button>
    </div>
  </div>
  
  <!-- iOS ÂÆâË£ùÊèêÁ§∫ -->
  <div id="ios-install-hint" class="ios-install-hint">
    <button class="ios-install-hint-close" onclick="hideIOSHint()">√ó</button>
    <p style="margin:0 0 8px 0;font-size:14px"><strong>üì≤ Install Fun Face Game</strong></p>
    <div style="font-size:12px;color:#64748b;line-height:1.6">
      1. Tap <span class="animate-bounce" style="display:inline-block">‚¨ÜÔ∏è</span> Share button<br>
      2. Select "Add to Home Screen"<br>
      3. Tap "Add"
    </div>
  </div>

  <script>
    (function(){
      'use strict';
      
      // ========== PWA ÂÆâË£ùÁÆ°ÁêÜ ==========
      var PWAInstall = {
        deferredPrompt: null,
        isInstalled: false,
        isIOS: false,
        isAndroid: false,
        isStandalone: false,
        
        init: function() {
          this.isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
          this.isAndroid = /Android/.test(navigator.userAgent);
          this.isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
          
          if (this.isStandalone) { this.isInstalled = true; return; }
          
          var dismissed = localStorage.getItem('pwa_install_dismissed');
          if (dismissed && Date.now() - parseInt(dismissed) < 24 * 60 * 60 * 1000) return;
          
          window.addEventListener('beforeinstallprompt', function(e) {
            e.preventDefault();
            PWAInstall.deferredPrompt = e;
            PWAInstall.showInstallButton();
          });
          
          window.addEventListener('appinstalled', function() {
            PWAInstall.hideInstallButton();
            PWAInstall.deferredPrompt = null;
            PWAInstall.isInstalled = true;
          });
          
          if (this.isIOS && !this.isStandalone) {
            setTimeout(function() { PWAInstall.showInstallButton(); }, 2000);
          }
          if (this.isAndroid && !this.isStandalone) {
            setTimeout(function() { if (!PWAInstall.deferredPrompt) PWAInstall.showInstallButton(); }, 3000);
          }
        },
        
        showInstallButton: function() {
          var btn = document.getElementById('install-btn');
          if (btn && !this.isInstalled) {
            btn.classList.add('show');
            var text = document.getElementById('install-text');
            if (text) text.textContent = I18n.t('app.install');
          }
        },
        
        hideInstallButton: function() {
          var btn = document.getElementById('install-btn');
          if (btn) btn.classList.remove('show');
        },
        
        handleClick: function() {
          if (this.isIOS) {
            var hint = document.getElementById('ios-install-hint');
            if (hint) hint.classList.add('show');
          } else if (this.deferredPrompt) {
            this.deferredPrompt.prompt();
            this.deferredPrompt.userChoice.then(function(result) {
              if (result.outcome === 'dismissed') localStorage.setItem('pwa_install_dismissed', Date.now().toString());
              PWAInstall.deferredPrompt = null;
            });
          } else {
            var msg = this.isAndroid ? 'üì≤ To install:\n\n1. Tap ‚ãÆ menu\n2. Select "Add to Home screen"\n3. Tap "Add"' : 'üì≤ To install:\n\n‚Ä¢ Chrome: ‚ãÆ ‚Üí "Install app"\n‚Ä¢ Safari: Share ‚Üí "Add to Home Screen"';
            FunFaceGame.showModal(I18n.t('app.install'), msg);
          }
        }
      };
      
      window.hideIOSHint = function() {
        var hint = document.getElementById('ios-install-hint');
        if (hint) hint.classList.remove('show');
        localStorage.setItem('pwa_install_dismissed', Date.now().toString());
      };
      
      window.handleInstallClick = function() { PWAInstall.handleClick(); };
      
      // ========== I18n ==========
      var I18n = (function(){
        var currentLanguage = 'en';
        var translations = {
          'en': { _langName:'English', 'app.title':'Fun Face Game', 'app.install':'Install', 'game.faceCrush':'Face Crush', 'game.faceSlicer':'Face Slicer', 'game.whacAFace':'Whac-A-Face', 'game.facePop':'Face Pop', 'game.faceStack':'Face Stack', 'game.faceMemory':'Face Memory', 'footer.aboutUs':'About', 'footer.privacy':'Privacy', 'footer.contact':'Contact', 'footer.copyright':'¬© 2024 Fun Face Game Studio', 'about.title':'About Us', 'about.content':'We create hilarious AI face games for families and friends!', 'privacy.title':'Privacy Policy', 'privacy.content':'Your privacy matters. All photos are processed in your browser and **never uploaded**.', 'contact.title':'Contact', 'contact.content':'Questions? Email us!', 'contact.email':'support@funfacegame.com' },
          'zh-TW': { _langName:'ÁπÅÈ´î‰∏≠Êñá', 'app.title':'Ë∂£Âë≥ËáâÈÉ®ÈÅäÊà≤', 'app.install':'ÂÆâË£ù', 'game.faceCrush':'ËáâÈÉ®Á≤âÁ¢é', 'game.faceSlicer':'ËáâÈÉ®ÂàáÂàáÊ®Ç', 'game.whacAFace':'ÊâìËáâÈº†', 'game.facePop':'ËáâÈÉ®Ê∞£ÁêÉ', 'game.faceStack':'ËáâÈÉ®ÁñäÁñäÊ®Ç', 'game.faceMemory':'ËáâÈÉ®Ë®òÊÜ∂', 'footer.aboutUs':'ÈóúÊñº', 'footer.privacy':'Èö±ÁßÅ', 'footer.contact':'ËÅØÁµ°', 'footer.copyright':'¬© 2024 Ë∂£Âë≥ËáâÈÉ®ÈÅäÊà≤', 'about.title':'ÈóúÊñºÊàëÂÄë', 'about.content':'ÊàëÂÄëÁÇ∫ÂÆ∂‰∫∫ÊúãÂèãÂâµÈÄ†Ê≠°Ê®ÇÁöÑ AI ËáâÈÉ®ÈÅäÊà≤ÔºÅ', 'privacy.title':'Èö±ÁßÅÊ¨äÊîøÁ≠ñ', 'privacy.content':'ÊÇ®ÁöÑÈö±ÁßÅÂæàÈáçË¶Å„ÄÇÊâÄÊúâÁÖßÁâáÈÉΩÂú®ÁÄèË¶ΩÂô®‰∏≠ËôïÁêÜÔºå**Áµï‰∏ç‰∏äÂÇ≥**„ÄÇ', 'contact.title':'ËÅØÁµ°ÊàëÂÄë', 'contact.content':'ÊúâÂïèÈ°åÂóéÔºüÂØÑ‰ø°Áµ¶ÊàëÂÄëÔºÅ', 'contact.email':'support@funfacegame.com' },
          'zh-CN': { _langName:'ÁÆÄ‰Ωì‰∏≠Êñá', 'app.title':'Ë∂£Âë≥ËÑ∏ÈÉ®Ê∏∏Êàè', 'app.install':'ÂÆâË£Ö', 'game.faceCrush':'ËÑ∏ÈÉ®Á≤âÁ¢é', 'game.faceSlicer':'ËÑ∏ÈÉ®ÂàáÂàá‰πê', 'game.whacAFace':'ÊâìËÑ∏Èº†', 'game.facePop':'ËÑ∏ÈÉ®Ê∞îÁêÉ', 'game.faceStack':'ËÑ∏ÈÉ®Âè†Âè†‰πê', 'game.faceMemory':'ËÑ∏ÈÉ®ËÆ∞ÂøÜ', 'footer.aboutUs':'ÂÖ≥‰∫é', 'footer.privacy':'ÈöêÁßÅ', 'footer.contact':'ËÅîÁ≥ª', 'footer.copyright':'¬© 2024 Ë∂£Âë≥ËÑ∏ÈÉ®Ê∏∏Êàè', 'about.title':'ÂÖ≥‰∫éÊàë‰ª¨', 'about.content':'Êàë‰ª¨‰∏∫ÂÆ∂‰∫∫ÊúãÂèãÂàõÈÄ†Ê¨¢‰πêÁöÑ AI ËÑ∏ÈÉ®Ê∏∏ÊàèÔºÅ', 'privacy.title':'ÈöêÁßÅÊùÉÊîøÁ≠ñ', 'privacy.content':'ÊÇ®ÁöÑÈöêÁßÅÂæàÈáçË¶Å„ÄÇÊâÄÊúâÁÖßÁâáÈÉΩÂú®ÊµèËßàÂô®‰∏≠Â§ÑÁêÜÔºå**Áªù‰∏ç‰∏ä‰º†**„ÄÇ', 'contact.title':'ËÅîÁ≥ªÊàë‰ª¨', 'contact.content':'ÊúâÈóÆÈ¢òÂêóÔºüÂèëÈÇÆ‰ª∂ÁªôÊàë‰ª¨ÔºÅ', 'contact.email':'support@funfacegame.com' },
          'ja': { _langName:'Êó•Êú¨Ë™û', 'app.title':'Â§âÈ°î„Ç≤„Éº„É†', 'app.install':'„Ç§„É≥„Çπ„Éà„Éº„É´', 'game.faceCrush':'„Éï„Çß„Ç§„Çπ„ÇØ„É©„ÉÉ„Ç∑„É•', 'game.faceSlicer':'„Éï„Çß„Ç§„Çπ„Çπ„É©„Ç§„Çµ„Éº', 'game.whacAFace':'„ÇÇ„Åê„Çâ„Åü„Åü„Åç', 'game.facePop':'„Éï„Çß„Ç§„Çπ„Éù„ÉÉ„Éó', 'game.faceStack':'„Éï„Çß„Ç§„Çπ„Çπ„Çø„ÉÉ„ÇØ', 'game.faceMemory':'È°îË®òÊÜ∂', 'footer.aboutUs':'Ê¶ÇË¶Å', 'footer.privacy':'„Éó„É©„Ç§„Éê„Ç∑„Éº', 'footer.contact':'ÈÄ£Áµ°', 'footer.copyright':'¬© 2024 Â§âÈ°î„Ç≤„Éº„É†', 'about.title':'Ê¶ÇË¶Å', 'about.content':'Ê•Ω„Åó„ÅÑAIÈ°î„Ç≤„Éº„É†„Çí‰Ωú„Å£„Å¶„ÅÑ„Åæ„ÅôÔºÅ', 'privacy.title':'„Éó„É©„Ç§„Éê„Ç∑„Éº', 'privacy.content':'„Éó„É©„Ç§„Éê„Ç∑„Éº„ÅØÂ§ßÂàá„Åß„Åô„ÄÇÂÜôÁúü„ÅØ„Éñ„É©„Ç¶„Ç∂„ÅßÂá¶ÁêÜ„Åï„Çå„Åæ„Åô„ÄÇ', 'contact.title':'ÈÄ£Áµ°', 'contact.content':'Ë≥™Âïè„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü', 'contact.email':'support@funfacegame.com' },
          'ko': { _langName:'ÌïúÍµ≠Ïñ¥', 'app.title':'Ïû¨ÎØ∏ÏûàÎäî ÏñºÍµ¥ Í≤åÏûÑ', 'app.install':'ÏÑ§Ïπò', 'game.faceCrush':'ÌéòÏù¥Ïä§ ÌÅ¨Îü¨Ïâ¨', 'game.faceSlicer':'ÌéòÏù¥Ïä§ Ïä¨ÎùºÏù¥ÏÑú', 'game.whacAFace':'ÎëêÎçîÏßÄ Ïû°Í∏∞', 'game.facePop':'ÌéòÏù¥Ïä§ Ìåù', 'game.faceStack':'ÌéòÏù¥Ïä§ Ïä§ÌÉù', 'game.faceMemory':'ÌéòÏù¥Ïä§ Î©îÎ™®Î¶¨', 'footer.aboutUs':'ÏÜåÍ∞ú', 'footer.privacy':'Í∞úÏù∏Ï†ïÎ≥¥', 'footer.contact':'Ïó∞ÎùΩÏ≤ò', 'footer.copyright':'¬© 2024 Ïû¨ÎØ∏ÏûàÎäî ÏñºÍµ¥ Í≤åÏûÑ', 'about.title':'ÏÜåÍ∞ú', 'about.content':'Ïû¨ÎØ∏ÏûàÎäî AI ÏñºÍµ¥ Í≤åÏûÑÏùÑ ÎßåÎì≠ÎãàÎã§!', 'privacy.title':'Í∞úÏù∏Ï†ïÎ≥¥', 'privacy.content':'Í∞úÏù∏Ï†ïÎ≥¥Îäî Ï§ëÏöîÌï©ÎãàÎã§.', 'contact.title':'Ïó∞ÎùΩÏ≤ò', 'contact.content':'ÏßàÎ¨∏Ïù¥ ÏûàÏúºÏã†Í∞ÄÏöî?', 'contact.email':'support@funfacegame.com' },
          'de': { _langName:'Deutsch', 'app.title':'Lustiges Gesichtsspiel', 'app.install':'Installieren', 'game.faceCrush':'Gesichts-Crush', 'game.faceSlicer':'Gesichts-Schneider', 'game.whacAFace':'Gesichts-Hammer', 'game.facePop':'Gesichts-Ballon', 'game.faceStack':'Gesichts-Stapel', 'game.faceMemory':'Gesichts-Memory', 'footer.aboutUs':'√úber uns', 'footer.privacy':'Datenschutz', 'footer.contact':'Kontakt', 'footer.copyright':'¬© 2024 Lustiges Gesichtsspiel', 'about.title':'√úber uns', 'about.content':'Wir machen lustige AI Gesichtsspiele!', 'privacy.title':'Datenschutz', 'privacy.content':'Ihre Privatsph√§re ist wichtig.', 'contact.title':'Kontakt', 'contact.content':'Fragen?', 'contact.email':'support@funfacegame.com' },
          'es': { _langName:'Espa√±ol', 'app.title':'Juego de Caras', 'app.install':'Instalar', 'game.faceCrush':'Cara Crush', 'game.faceSlicer':'Corta Caras', 'game.whacAFace':'Golpea Cara', 'game.facePop':'Cara Pop', 'game.faceStack':'Apila Caras', 'game.faceMemory':'Memoria Caras', 'footer.aboutUs':'Nosotros', 'footer.privacy':'Privacidad', 'footer.contact':'Contacto', 'footer.copyright':'¬© 2024 Juego de Caras', 'about.title':'Nosotros', 'about.content':'Creamos juegos de caras divertidos!', 'privacy.title':'Privacidad', 'privacy.content':'Su privacidad importa.', 'contact.title':'Contacto', 'contact.content':'¬øPreguntas?', 'contact.email':'support@funfacegame.com' },
          'vi': { _langName:'Ti·∫øng Vi·ªát', 'app.title':'Game M·∫∑t Vui', 'app.install':'C√†i ƒë·∫∑t', 'game.faceCrush':'ƒê·∫≠p M·∫∑t', 'game.faceSlicer':'C·∫Øt M·∫∑t', 'game.whacAFace':'ƒê√°nh M·∫∑t', 'game.facePop':'N·ªï M·∫∑t', 'game.faceStack':'X·∫øp M·∫∑t', 'game.faceMemory':'Nh·ªõ M·∫∑t', 'footer.aboutUs':'Gi·ªõi thi·ªáu', 'footer.privacy':'B·∫£o m·∫≠t', 'footer.contact':'Li√™n h·ªá', 'footer.copyright':'¬© 2024 Game M·∫∑t Vui', 'about.title':'Gi·ªõi thi·ªáu', 'about.content':'Ch√∫ng t√¥i t·∫°o game m·∫∑t vui!', 'privacy.title':'B·∫£o m·∫≠t', 'privacy.content':'Quy·ªÅn ri√™ng t∆∞ quan tr·ªçng.', 'contact.title':'Li√™n h·ªá', 'contact.content':'C√≥ c√¢u h·ªèi?', 'contact.email':'support@funfacegame.com' }
        };
        function t(key){ var lang = translations[currentLanguage] || translations['en']; return lang[key] || translations['en'][key] || key; }
        function setLanguage(code){ if(translations[code]){ currentLanguage = code; return true; } return false; }
        function getCurrentLanguage(){ return currentLanguage; }
        function getLanguageName(code){ var lang = translations[code]; return lang ? lang._langName : code; }
        function getSupportedLanguages(){ return Object.keys(translations).map(function(code){ return { code: code, name: translations[code]._langName }; }); }
        function isSupported(code){ return !!translations[code]; }
        return { t:t, setLanguage:setLanguage, getCurrentLanguage:getCurrentLanguage, getLanguageName:getLanguageName, getSupportedLanguages:getSupportedLanguages, isSupported:isSupported };
      })();
      window.I18n = I18n;
      
      // ÈÅäÊà≤Ë®≠ÂÆö - ÂÖ®ÈÉ®ÂïüÁî®
      var GAMES = [
        { id:'face-crush', nameKey:'game.faceCrush', image:'./assets/images/buttons/button-face-crush.png', fallbackEmoji:'üí•', path:'./plugins/face-crush/index.html' },
        { id:'face-slicer', nameKey:'game.faceSlicer', image:'./assets/images/buttons/button-face-slicer.png', fallbackEmoji:'üî™', path:'./plugins/face-slicer/index.html' },
        { id:'whac-a-face', nameKey:'game.whacAFace', image:'./assets/images/buttons/button-whac-a-face.png', fallbackEmoji:'üî®', path:'./plugins/whac-a-face/index.html' },
        { id:'face-pop', nameKey:'game.facePop', image:'./assets/images/buttons/button-face-pop.png', fallbackEmoji:'üéà', path:'./plugins/face-pop/index.html' },
        { id:'face-stack', nameKey:'game.faceStack', image:'./assets/images/buttons/button-face-stack.png', fallbackEmoji:'üìö', path:'./plugins/face-stack/index.html' },
        { id:'face-memory', nameKey:'game.faceMemory', image:'./assets/images/buttons/button-face-memory.png', fallbackEmoji:'üß†', path:'./plugins/face-memory/index.html' }
      ];
      
      var currentLang = 'en';
      var DOM = {};
      
      function init(){
        cacheDOM();
        detectLanguage();
        renderLanguageOptions();
        renderGameGrid();
        updateTexts();
        bindEvents();
        PWAInstall.init();
      }
      
      function cacheDOM(){
        DOM.appTitle = document.getElementById('app-title');
        DOM.langSwitcher = document.getElementById('lang-switcher');
        DOM.langBtn = document.getElementById('lang-btn');
        DOM.langDropdown = document.getElementById('lang-dropdown');
        DOM.langChevron = document.getElementById('lang-chevron');
        DOM.currentLang = document.getElementById('current-lang');
        DOM.gameGrid = document.getElementById('game-grid');
        DOM.installBtn = document.getElementById('install-btn');
        DOM.installText = document.getElementById('install-text');
        DOM.btnAbout = document.getElementById('btn-about');
        DOM.btnPrivacy = document.getElementById('btn-privacy');
        DOM.btnContact = document.getElementById('btn-contact');
        DOM.copyright = document.getElementById('copyright');
        DOM.modalOverlay = document.getElementById('modal-overlay');
        DOM.modalTitle = document.getElementById('modal-title');
        DOM.modalBody = document.getElementById('modal-body');
      }
      
      function detectLanguage(){
        try {
          var saved = localStorage.getItem('fun_face_game_language');
          if(saved && I18n.isSupported(saved)){ currentLang = saved; I18n.setLanguage(currentLang); return; }
        } catch(e){}
        var browserLang = navigator.language || 'en';
        if(browserLang.indexOf('zh-TW') >= 0 || browserLang.indexOf('zh-HK') >= 0) currentLang = 'zh-TW';
        else if(browserLang.indexOf('zh') >= 0) currentLang = 'zh-CN';
        else if(browserLang.indexOf('ja') === 0) currentLang = 'ja';
        else if(browserLang.indexOf('ko') === 0) currentLang = 'ko';
        else if(browserLang.indexOf('de') === 0) currentLang = 'de';
        else if(browserLang.indexOf('es') === 0) currentLang = 'es';
        else if(browserLang.indexOf('vi') === 0) currentLang = 'vi';
        else currentLang = 'en';
        I18n.setLanguage(currentLang);
      }
      
      function renderLanguageOptions(){
        if(!DOM.langDropdown) return;
        var langs = I18n.getSupportedLanguages();
        DOM.langDropdown.innerHTML = langs.map(function(l){
          var isActive = l.code === currentLang ? ' active' : '';
          return '<button class="lang-option' + isActive + '" onclick="FunFaceGame.setLanguage(\'' + l.code + '\')">' + l.name + '</button>';
        }).join('');
        if(DOM.currentLang) DOM.currentLang.textContent = I18n.getLanguageName(currentLang);
      }
      
      function renderGameGrid(){
        if(!DOM.gameGrid) return;
        DOM.gameGrid.innerHTML = GAMES.map(function(game){
          return '<div class="clay-card game-card" onclick="window.location.href=\'' + game.path + '\'" data-game="' + game.id + '">' +
            '<div class="game-card-inner">' +
              '<img src="' + game.image + '" alt="' + I18n.t(game.nameKey) + '" onerror="this.outerHTML=\'<div class=img-fallback>' + game.fallbackEmoji + '</div>\'">' +
            '</div>' +
            '<div class="game-name" data-i18n="' + game.nameKey + '">' + I18n.t(game.nameKey) + '</div>' +
          '</div>';
        }).join('');
      }
      
      function updateTexts(){
        if(DOM.appTitle) DOM.appTitle.textContent = I18n.t('app.title');
        if(DOM.installText) DOM.installText.textContent = I18n.t('app.install');
        if(DOM.btnAbout) DOM.btnAbout.textContent = I18n.t('footer.aboutUs');
        if(DOM.btnPrivacy) DOM.btnPrivacy.textContent = I18n.t('footer.privacy');
        if(DOM.btnContact) DOM.btnContact.textContent = I18n.t('footer.contact');
        if(DOM.copyright) DOM.copyright.textContent = I18n.t('footer.copyright');
        document.querySelectorAll('[data-i18n]').forEach(function(el){
          el.textContent = I18n.t(el.dataset.i18n);
        });
      }
      
      function bindEvents(){
        if(DOM.langBtn){
          DOM.langBtn.addEventListener('click', function(e){
            e.stopPropagation();
            DOM.langSwitcher.classList.toggle('open');
            DOM.langChevron.style.transform = DOM.langSwitcher.classList.contains('open') ? 'rotate(180deg)' : '';
          });
        }
        document.addEventListener('click', function(){ if(DOM.langSwitcher) DOM.langSwitcher.classList.remove('open'); if(DOM.langChevron) DOM.langChevron.style.transform = ''; });
        if(DOM.btnAbout) DOM.btnAbout.addEventListener('click', function(){ showModal(I18n.t('about.title'), I18n.t('about.content')); });
        if(DOM.btnPrivacy) DOM.btnPrivacy.addEventListener('click', function(){ showModal(I18n.t('privacy.title'), I18n.t('privacy.content')); });
        if(DOM.btnContact) DOM.btnContact.addEventListener('click', function(){ showModal(I18n.t('contact.title'), I18n.t('contact.content') + '\n\nüìß ' + I18n.t('contact.email')); });
        if(DOM.modalOverlay) DOM.modalOverlay.addEventListener('click', closeModal);
      }
      
      function showModal(title, content){
        if(DOM.modalTitle) DOM.modalTitle.textContent = title;
        if(DOM.modalBody) DOM.modalBody.innerHTML = content.replace(/\*\*(.*?)\*\*/g, '<strong class="text-blue-600">$1</strong>');
        if(DOM.modalOverlay) DOM.modalOverlay.classList.add('show');
      }
      
      function closeModal(){
        if(DOM.modalOverlay) DOM.modalOverlay.classList.remove('show');
      }
      
      window.FunFaceGame = {
        showModal: showModal,
        closeModal: closeModal,
        setLanguage: function(lang){
          if(I18n.isSupported(lang)){
            currentLang = lang;
            I18n.setLanguage(lang);
            try { localStorage.setItem('fun_face_game_language', lang); } catch(e){}
            renderLanguageOptions();
            renderGameGrid();
            updateTexts();
          }
        }
      };
      
      if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init);
      else init();
    })();
  </script>
  
  <script>
    if('serviceWorker' in navigator){
      window.addEventListener('load', function(){
        navigator.serviceWorker.register('./sw.js').catch(function(){});
      });
    }
  </script>
</body>
</html>
